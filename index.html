<!DOCTYPE html>
<html lang="zh_CN">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>BT种子转磁性链接 | 磁性链接转BT种子</title>
	<meta name="description" content="Torrent to Magnet online converter">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="//cdn.jsdelivr.net/gh/cdnjs/cdnjs/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" media="screen" />
	<link href="//cdn.jsdelivr.net/gh/cdnjs/cdnjs/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen" />
	<style>
html,
body {
	height: 100%;
}

#body {
	min-height: 100%;
	height: auto !important;
	height: 100%;
}

#footer {
	height: 60px;
	background-color: #f5f5f5;
	margin-top: -60px;
}

#container {
	margin-top: 60px;
	padding-bottom: 60px;
}

@media (max-width: 767px) {
	#footer {
		margin-left: -20px;
		margin-right: -20px;
		padding-left: 20px;
		padding-right: 20px;
	}
}

#footer .credit {
	margin: 20px 0;
}
	</style>
	<script src="js/bencode.js" type="text/javascript"></script>
	<script src="js/converter.js" type="text/javascript"></script>
</head>
<body>
<div class="navbar navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<a href="https://dock.eu.org" class="brand">Hello World</a>
			<ul class="nav pull-right">
				<li><a href="#">关于</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="body">
<div class="container">
	<div id="container">
		<div class="row">
			<div class="span8 offset2">
				<div class="tabbable">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#torrent2magnet" data-tab="torrent2magnet">种子转磁链</a></li>
						<li><a href="#magnet2torrent" data-tab="magnet2torrent">磁链转种子</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="torrent2magnet">
							<form>
								<input id="file_upload" name="file_upload" type="file" multiple="false" />
							</form>
							<div class="info"></div>
						</div>
						<div class="tab-pane" id="magnet2torrent">
							<form class="form-search">
								<input type="text" id="magnet" name="magnet" class="span6" placeholder="type magnet link here" />
								<input type="button" class="btn btn-primary" id="submit" name="submit" value="submit" />
							</form>
							<div  class="info"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>

<div id="footer">
	<div id="copyright" class="container">
		<p class="muted credit">Copyright &copy; <a href="https://github.com/messycode" target="_blank">messycode</a>, All Rights Reserved,Power by <a href="https://twitter.github.io/bootstrap/" target="_blank">bootstrap</a>,Design by <a href="https://9527.eu.org" target="_blank">likebeta</a></p>
	</div>
</div>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
	// Tab switching
	const tabLinks = document.querySelectorAll('.nav-tabs a[data-tab]');
	tabLinks.forEach(function(link) {
		link.addEventListener('click', function(e) {
			e.preventDefault();
			// Remove active class from all tabs
			tabLinks.forEach(function(l) {
				l.parentElement.classList.remove('active');
			});
			// Add active class to clicked tab
			this.parentElement.classList.add('active');
			// Hide all panes
			document.querySelectorAll('.tab-pane').forEach(function(pane) {
				pane.classList.remove('active');
			});
			// Show target pane
			const targetId = this.getAttribute('data-tab');
			document.getElementById(targetId).classList.add('active');
		});
	});

	// Handle file selection for torrent to magnet conversion
	const fileUpload = document.getElementById('file_upload');
	if (fileUpload) {
		fileUpload.addEventListener('change', function() {
			const file = this.files[0];
			if (!file) return;

			// Convert torrent to magnet
			Torrent2Magnet.convert(file, function(result) {
				// Show result
				const resultDiv = document.querySelector('#torrent2magnet .info');
				let strHtml = 'The file ' + file.name + ' is invalid! ';
				if (result.result) {
					strHtml = '<a href="' + result.url + '" target="_blank">' + result.url;
				}
				resultDiv.innerHTML = '<div class="alert"><button type="button" class="close">×</button>' + strHtml + '</div>';
			});
		});
	}

	// Handle magnet to torrent conversion
	const submitBtn = document.getElementById('submit');
	if (submitBtn) {
		submitBtn.addEventListener('click', function() {
			const magnetUrl = document.getElementById('magnet').value;
			const result = magnet2torrent(magnetUrl);
			const divResult = document.querySelector('#magnet2torrent .info');
			let strHtml = 'The url ' + magnetUrl + ' is invalid! ';
			if (result.result) {
				strHtml = '<a href="' + result.url + '">' + result.url;
			}
			divResult.innerHTML = '<div class="alert"><button type="button" class="close">×</button>' + strHtml + '</div>';
		});
	}

	// Alert close buttons
	document.addEventListener('click', function(e) {
		if (e.target.classList.contains('close')) {
			const alert = e.target.closest('.alert');
			if (alert) {
				alert.remove();
			}
		}
	});
});
</script>
</body>
</html>
